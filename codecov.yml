# Codecov repository YAML
# https://docs.codecov.com/docs/codecov-yaml
coverage:

  # https://docs.codecov.com/docs/commit-status
  status:

    project:
      default:
        target: 80%                    # Default target for all components
        threshold: 10%                 # Allowable drop in coverage without failing
        if_not_found: success          # If no coverage report is found, don't fail
        if_ci_failed: error            # CI failure should fail coverage check

      patch:
        default:
          target: 80%                  # Target for changed lines
          threshold: 10%               # Allowable drop in coverage without failing

component_management:

  default_rules:                       # default rules that will be inherited by all components
    statuses:
      - type: project                  # components that don't have a status defined will have a project type one
        target: auto
        branches:
          - "!main"

  individual_components:
    - component_id: controllers        # this is an identifier that should not be changed
      name: Controllers                # this is a display name, and can be changed freely
      paths:
        - 'src/Dotnet.Samples.AspNetCore.WebApi/Controllers/'
    - component_id: services
      name: Services
      paths:
        - 'src/Dotnet.Samples.AspNetCore.WebApi/Services/'

comment:
  layout: "header, diff, flags, components"

# https://docs.codecov.com/docs/ignoring-paths
ignore:
  # Ignoring specific file yypes
  - '**/*.sln'                         # Solution files
  - '**/*.csproj'                      # C# project files
  - '**/*.json'                        # JSON config files (e.g., appsettings)
  - '**/*.yml'                         # YAML config files (e.g., pipelines)
  - '**/*.png'                         # Image assets (e.g., Swagger diagram)

  #Â Ignoring a specific folder
  - 'src/**/Data/**/*'                 # Repositories, DbContext, database files
  - 'src/**/Enums/**/*'                # Enums like Position
  - 'src/**/Mappings/**/*'             # AutoMapper profiles
  - 'src/**/Migrations/**/*'           # EF Core migration artifacts
  - 'src/**/Models/**/*'               # Domain and DTO models
  - 'src/**/Properties/**/*'           # launchSettings.json or other system files
  - 'src/**/Utilities/**/*'            # Static helper and extension classes
  - 'src/**/Validators/**/*'           # FluentValidation validators
  - 'test'                             # Any file in the test folder (unit/integration/utils)

  # Ignoring Specific Files At All Depths
  - '**/Program.cs'                    # ASP.NET Core entry point
  - '**/.gitignore'                    # Git ignore file
  - '**/LICENSE'                       # License text
  - '**/README.md'                     # Project readme
